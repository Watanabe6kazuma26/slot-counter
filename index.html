<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>スロット検証カウンター</title>

<style>
body{
  font-family: sans-serif;
  text-align:center;
  background:#111;
  color:white;
  margin:0;
  padding:10px;
}

h1{
  font-size:20px;
}

.total{
  font-size:22px;
  margin:15px 0;
  padding:10px;
  background:#222;
  border-radius:10px;
}

input{
  width:90%;
  padding:10px;
  font-size:16px;
  margin-bottom:10px;
}

button{
  width:90%;
  padding:15px;
  margin:5px 0;
  font-size:16px;
  border:none;
  border-radius:8px;
}

.plus{ background:#28a745; color:white; }
.minus{ background:#dc3545; color:white; }
</style>
</head>

<body>

<h1>スロット検証カウンター</h1>

<div class="total">
累計総回数: <span id="totalCount">0</span>
</div>

<input type="text" id="hallName" placeholder="ホール名を入力">

<button class="plus" onclick="sendData('plus')">＋ カウント</button>
<button class="minus" onclick="sendData('minus')">－ カウント</button>

<script>

const GAS_URL = "https://script.google.com/macros/s/AKfycbzDhimOqvZ4WngM2NxYO_rRSrKiWFD2RDIZRGLwL5YcY0Hl-F8zxFRNZYgZyt46bMA/exec";

async function sendData(type){

  const hall = document.getElementById("hallName").value;

  await fetch(GAS_URL,{
    method:"POST",
    body:JSON.stringify({
      hall:hall,
      type:type
    })
  });

  loadTotal(); // 送信後に総計更新
}

async function loadTotal(){
  const res = await fetch(GAS_URL);
  const data = await res.json();
  document.getElementById("totalCount").innerText = data.total;
}

// ページ読み込み時に総計表示
loadTotal();

</script>

</body>
</html>
